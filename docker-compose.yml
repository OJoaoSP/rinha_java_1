version: '3.5'

services:
  api:
    build:
      context: ./
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    volumes:
      - ./:/app
    environment:
      - DB_HOST=mysql_1_F
      - DB_PORT=3307
      - DB_USERNAME=root
      - DB_PASSWORD=Spacekl3
      - DEBUG=true
    depends_on:
      - mysql

  mysql:
    image: "mysql:8.0"
    container_name: "mysql_1_F"
    ports:
      - "3307:3307"
    environment:
      - MYSQL_ROOT_PASSWORD=Spacekl3
      - MYSQL_DATABASE=rinha
    deploy:
      resources:
        limits:
          cpus: "1"
          memory: "200MB"